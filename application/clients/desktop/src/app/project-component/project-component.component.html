<div class="container">
    <br />
    <h1 style="text-align: center;">Project Components</h1>
    <br />
    <br />
    <div>
    <mat-accordion>
    <mat-expansion-panel [expanded]="true">
    <mat-expansion-panel-header>
    <mat-panel-title>My Features </mat-panel-title>
    </mat-expansion-panel-header>
    
    <div style="padding-right: 20px;">
    <button class="btn btn-primary float-right" color="primary" (click)="openFeatureDialog()">Add
    Features</button>
    </div>
    <div class="row" style="margin: 0px;" *ngIf="projectFeatureData.length > 0">
    <div class="col-md-4" *ngFor="let feature of projectFeatureData; let i = index">
    <div class="card">
    <div class="card-header">
    {{feature.name}}
    </div>
    <div class="card-body">
    <div><span>{{feature.description}}</span></div>
    <br />
    <button class="btn btn-info" [routerLink]="['/feature-details']"
    [queryParams]="{featureId: feature._id}">View Details</button>
    </div>
    </div>
    </div>
    <div class="col-md-4" *ngIf="featureData && featureData.length === 0">
    No Feature Available.
    </div>
    </div>
    </mat-expansion-panel>
    <mat-expansion-panel>
    <mat-expansion-panel-header>
    <mat-panel-title> Entities </mat-panel-title>
    </mat-expansion-panel-header>
    <div style="padding-right: 20px;">
    <button class="createEntityButton" mat-raised-button color="primary" (click)="saveEntityModel()">Create
    Entity</button>
    </div>
    <div class="row" style="margin: 0px;">
    <div class="col-md-4" *ngFor="let entity of projectEntity; let i = index">
    <div class="card">
    <div class="card-header">
    {{entity.name}}
    <img *ngIf="!entity.is_default" style="float: right; cursor: pointer;" (click)="editEntity(entity)"
    src="https://img.icons8.com/metro/26/000000/edit-file.png">
    </div>
    <div class="card-body">
    <div><span>{{entity.description}}</span></div>
    <br />
    <button mat-raised-button color="primary" (click)="editEntityField(entity)">Edit</button>
    &nbsp;
    <button mat-raised-button color="warn" [disabled]="entity.is_default"
    (click)="openDeleteModel(entity)">Delete</button>
    </div>
    </div>
    </div>
    <div class="col-md-4" *ngIf="projectEntity.length === 0">
    No Entity Available.
    </div>
    </div>
    <!-- 
    <mat-card *ngFor="let entity of allEntity" class="entity-card">
    <mat-card-header>
    <mat-card-title>{{entity.name}}</mat-card-title>
    </mat-card-header>
    <mat-card-content>
    <p>
    {{entity.description}}
    </p>
    </mat-card-content>
    <mat-card-actions>
    <button mat-raised-button color="primary" [routerLink]="['/entity-field']">Edit</button>
    <button mat-raised-button color="warn" (click)="deleteEntity(entity._id)">Delete</button>
    </mat-card-actions>
    </mat-card> -->
    
    </mat-expansion-panel>
    <mat-expansion-panel>
    <mat-expansion-panel-header>
    <mat-panel-title> Screens </mat-panel-title>
    </mat-expansion-panel-header>
    <mat-card-content>
    
    <button class="createEntityButton goToButton" mat-raised-button (click)="GoToDesigner()">Add Screen</button>
    </mat-card-content>
    <!-- <div class="row" style="margin: 0px;" *ngIf="selecteddefaultEntity && selecteddefaultEntity.length > 0">
    <div class="col-md-4" *ngFor="let defaultEntity of selecteddefaultEntity; let i = index">
    <div class="card">
    <div class="card-header">
    <h4>User:<span>{{defaultEntity?.user_name}}</span></h4>
    </div>
    <div class="card-body">
    <div>
    <h4>Project: <span>{{defaultEntity?.project_name}}</span></h4>
    </div>
    </div>
    </div>
    </div>
    </div> -->
    </mat-expansion-panel>
    <app-techarchitecture-manager></app-techarchitecture-manager>
    </mat-accordion>
    </div>
    </div>
    
    <div class="modal" tabindex="-1" role="dialog" [ngStyle]="{'top': '100px','display':deletePopup}">
    <div class="modal-dialog modal-sm" role="dialog">
    <div class="modal-content">
    <!-- <div class="modal-header">
    <h6 class="modal-title">Delete</h6>
    <button type="button" class="close">&times;</button>
    </div> -->
    <div class="delete modal-body">
    <p>Please click confirm to delete this project ? </p>
    </div>
    <div class="modal-footer" style="padding: 5px">
    <button type="button" class="btn btn-default" (click)="deleteEntity()">Confirm</button>
    &nbsp;
    <button type="button" class="btn btn-default" (click)="closeDeleteModel()">Cancel</button>
    </div>
    </div>
    
    </div>
    </div>
    
    <div class="modal" tabindex="-1" role="dialog" [ngStyle]="{'top': '100px','display':deleteFPopup}">
    <div class="modal-dialog modal-sm" role="dialog">
    <div class="modal-content">
    <!-- <div class="modal-header">
    <h6 class="modal-title">Delete</h6>
    <button type="button" class="close">&times;</button>
    </div> -->
    <div class="delete modal-body">
    <p>Please click confirm to delete this Feature ? </p>
    </div>
    <div class="modal-footer" style="padding: 5px">
    <button type="button" class="btn btn-default" (click)="deleteFeature()">Confirm</button>
    &nbsp;
    <button type="button" class="btn btn-default" (click)="closeDeleteFModel()">Cancel</button>
    </div>
    </div>
    
    </div>
    </div>
    
    
    <div class="modal" tabindex="-1" data-keyboard="true" aria-hidden="true" data-backdrop="true" role="dialog"
    [ngStyle]="{'top': '100px','display':displayFeatureModel}">
    <div class="modal-dialog modal-lg" role="dialog">
    <div class="feature modal-content">
    <div class="modal-body">
    <div class="container">
    <h1>Add Feature</h1>
    <div class="row">
    <mat-radio-group layout="row" [(ngModel)]="selectedOption">
    <mat-radio-button class="example-radio-button" *ngFor="let option of options" [value]="option"
    (change)="radioChange($event)">
    {{option}}
    </mat-radio-button>
    </mat-radio-group>
    <!-- <div class="radio mr-sm-4">
    <label><input type="radio" name="selectFeature" [value]="false"
    (change)="onChangeRadio($event.target.value)" [(ngModel)]="selectFeature">Import
    Feature</label>
    </div>
    <div class="radio mr-sm-4">
    <label><input type="radio" name="selectFeature" (change)="onChangeRadio($event.target.value)"
    [value]="true" [(ngModel)]="selectFeature">Add New
    Feature</label>
    </div>
    <div class="radio mr-sm-4">
    <label><input type="radio" name="selectFeature" (change)="onChangeRadio($event.target.value)"
    [value]="true" [(ngModel)]="selectFeature">Create
    Feature</label>
    </div> -->
    </div>
    <div *ngIf="showImportFeature" class="dropdown mt-sm-2 mb-sm-2">
    <div class="form-group">
    <label for="sel1">Import Existing Feature:</label>
    <select class="form-control" [(ngModel)]="featureDetails.name" (change)="onChange($event.target.value)">
    <option value="" selected>Select Feature</option>
    <option *ngFor="let feature of featureData" value="{{feature.name}}"
    ([ngModel])="selectedExistingFeature">{{feature.name}}</option>
    </select>
    </div>
    </div>
    <form #featurForm="ngForm">
    <div class="form-group">
    <label for="name">Name</label>
    <input type="text" class="form-control" name="name" [(ngModel)]="featureDetails.name" #name="ngModel"
    [ngClass]="{ 'is-invalid': featurForm.submitted && name.invalid }" required />
    <div *ngIf="featurForm.submitted && name.invalid" class="invalid-feedback">
    <div *ngIf="name.errors.required">Name is required</div>
    </div>
    </div>
    
    <div class="form-group" *ngIf="showUploadFeature">
    <!-- <label for="upload">Upload File</label> -->
    <div class="mb-sm-2">
    <label for="name">UI YAML</label><br/>
    <input type="file" (change)="fileSelected($event)" />
    </div>
    <div class="mb-sm-2">
    <label for="name">Service YAML</label><br/>
    <input type="file" (change)="fileSelectedBack($event)" />
    </div>
    <div class="mb-sm-2">
    <label for="name">ApiGateway YAML</label><br/>
    <input type="file" (change)="fileSelectedApi($event)" />
    </div>
    <!-- <input type="file" class="form-control" name="upload" (change)="handleFileInput($event.target.files)" accept=".yaml,.yml"/> -->
    </div>
    <!-- <div class="drop-zone">
    <div ng2FileDrop [uploader]="uploader" multiple class="drop-zone">
    Drag and drop files to upload
    </div>
    </div> -->
    <div class="form-group">
    <label for="description">Description</label>
    <ckeditor [editor]="Editor" name="description" id="editor" (ready)="onReady($event)"
    [(ngModel)]="featureDetails.description"></ckeditor>
    <!-- use this inside ckeditor tag for image upload replace your api with uploadUrl [config]="{ ckfinder :{uploadUrl: 'https://your-organization-id.cke-cs.com/easyimage/upload/'}}" -->
    </div>
    </form>
    </div>
    </div>
    <!-- <div class="modal-footer" style="padding: 5px" *ngIf="!selectFeature">
    <button class="btn btn-primary" (click)="createFeature()">Create</button>
    <button type="button" class="btn btn-default" (click)="closeFeatureExistingModel()">Cancel</button>
    </div> -->
    <div class="modal-footer" style="padding: 5px" *ngIf="showAddFeature || showUploadFeature">
    <button class="btn btn-primary" (click)="createFeature()">Create</button>
    <button type="button" class="btn btn-default" (click)="closeFeatureCreateModel()">Cancel</button>
    </div>
    <div class="modal-footer" style="padding: 5px" *ngIf="showImportFeature">
    <button class="btn btn-primary" (click)="addFeature()">Import</button>
    <button type="button" class="btn btn-default" (click)="closeFeatureExistingModel()">Cancel</button>
    </div>
    </div>
    
    </div>
    </div>